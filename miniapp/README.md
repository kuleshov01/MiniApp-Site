# Единая карта сахалинца - Мини-приложение

Мини-приложение для мессенджера Макс, позволяющее пользователям взаимодействовать с сервисами Единой карты сахалинца.

## Функции

1. **Получить карту** - Подача заявки на оформление Единой карты сахалинца
2. **Обратная связь** - Обращение в службу поддержки
3. **Личный кабинет** - Авторизация и управление картой (статус, подключение, отключение)

## Установка и запуск

### Локальный запуск

```bash
cd miniapp
npm install
npm start
```

Приложение будет доступно по адресу http://localhost:8080

### Размещение на сервере

Загрузите содержимое директории `miniapp` на ваш сервер. 

Убедитесь, что сервер настроен на обслуживание статических файлов.

## Настройка

### URL почтового шлюза

В файле `script.js` измените значение переменной `gatewayUrl` на актуальный URL вашего почтового шлюза:

```javascript
const gatewayUrl = 'https://your-server.com/api/gateway';
```

### Формат данных для почтового шлюза

Приложение отправляет POST-запросы с JSON-данными:

#### Заявка на карту
```json
{
  "type": "get_card",
  "bank": "gazprombank",
  "card_type": "self",
  "phone": "+7 (999) 123-45-67",
  "transport": true,
  "longevity": false,
  "aquapark": false,
  "consent": true
}
```

#### Обратная связь
```json
{
  "type": "support",
  "name": "Иван Иванов",
  "phone": "+7 (999) 123-45-67",
  "email": "ivan@mail.ru",
  "subject": "status",
  "message": "Узнать статус карты",
  "consent": true
}
```

#### Авторизация
```json
{
  "type": "login",
  "phone": "+7 (999) 123-45-67",
  "password": "password123"
}
```

#### Регистрация
```json
{
  "type": "register",
  "fullname": "Иванов Иван Иванович",
  "phone": "+7 (999) 123-45-67",
  "email": "ivan@mail.ru",
  "snils": "123-456-789 12",
  "password": "password123"
}
```

#### Отключение карты
```json
{
  "type": "disconnect",
  "phone": "+7 (999) 123-45-67"
}
```

## Интеграция с мессенджером Макс

Для интеграции добавьте мини-приложение в Макс:

1. Откройте настройки мини-приложений в Макс
2. Добавьте новый мини-апп
3. Укажите URL вашего приложения
4. Настройте параметры отображения

## Технологии

- HTML5
- CSS3 (мобильная адаптация)
- Vanilla JavaScript
- LocalStorage для хранения сессии

## Поддержка экранов

Приложение оптимизировано для мобильных устройств с разрешением от 320px до 480px по ширине.